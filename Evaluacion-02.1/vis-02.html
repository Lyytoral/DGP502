<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="estilo.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Mandali&display=swap" rel="stylesheet">
    <title>Trabajo académico</title>
    <style>
    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

    body {
        margin-top: 20px;
    }

    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }
    </style>
</head>

<body>
    <!--- Esta visualización compara el trabajo que exige cada ramo--->
    <div class="container-fluid">
        <div class="container">
            <header class="blog-header py-2">
                <div class="row flex-nowrap justify-content-between align-items-center">
                    <div class="col-6 pt-1">
                        <a class="blog-header-logo text-dark" href="index.html">Fernando Catalán Bachiloglu</a>
                    </div>
                    <div class="col-lg-2 text-center">
                        <a class="text-muted" href="info.html">info</a>
                    </div>
                </div>
            </header>
            <!-- Aquí va la visualización --->
            <div class=" rounded mover">
                <div id="resultado"></div>
            </div>
            <!-- Hasta aquí la visualizacion -->
            <!-- Aquí va lo de la izquierda -->
            <div class="row mb-2">
                <div class="col">
                    <div class="row no-gutters  rounded overflow-hidden flex-md-row mb-4 position-relative">
                        <div class="col p-4 d-flex flex-column position-static">
                            <h3 class="mb-3 blog-header font-weight-bold">Horas por semana</h3>
                            <p class="card-text mb-auto">Esta visualización corresponde a una comaparción semanal (4 semanas de Mayo) del tiempo dedicado tanto en sala como fuera de ella a los 6 cursos que estoy cursando. Los datos utilizados en esta visualización están almacenados en <a href="https://api.myjson.com/bins/inixb">este JSON</a>.</p>
                        </div>
                    </div>
                </div>
                <!-- Hasta aquí lo de la izquierda -->
                <!--Aquí va lo de la derecha -->
                <div class="col-md-4 mt-2">
                    <div class="row no-gutters rounded overflow-hidden flex-md-row mb-4 position-relative">
                        <div class="col p-4 d-flex flex-column position-static">
                            <h5 class="mb-3 blog-header font-weight-bold">Cursos</h5>
                            <p class="mb-auto">
                                <div class="los-cursos"></div>
                            </p>
                            <div class="row flex-nowrap justify-content-between">
                                <div class="col-6 enlaces"><a href="vis-01.html">
                                        <p class="text-left enlaces">Anterior</p>
                                    </a></div>
                                <div class="col-6 enlaces"><a href="vis-03.html">
                                        <p class="text-right enlaces">Siguiente</p>
                                    </a></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Hasta aquí lo de la deracha -->
            </div>
        </div>
    </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.dom.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
    var horas = [];
    var suma = [];
    var losPromedios = [];
    var semanaUno = [];
    var semanaDos = [];
    var semanaTres = [];
    var semanaCuatro = [];

    $.getJSON("https://api.myjson.com/bins/qaz4x", function(data) {
        console.log(data);
        for (var i = 0; i < 6; i++) {
            for (var j = 0; j < 1; j++) {

                var x = data[i].dedicacion[0];
                semanaUno.push(x);

                var x = data[i].dedicacion[1];
                semanaDos.push(x);

                var x = data[i].dedicacion[2];
                semanaTres.push(x);

                var x = data[i].dedicacion[3];
                semanaCuatro.push(x);


            }


        }
        console.log(semanaUno);
        console.log(semanaDos);
        console.log(semanaTres);
        console.log(semanaCuatro);


        function getSum(total, num) {
            return (total + num)
        }

        semanaUno = semanaUno.reduce(getSum);
        console.log(semanaUno);
        semanaDos = semanaDos.reduce(getSum);
        console.log(semanaDos);
        semanaTres = semanaTres.reduce(getSum);
        console.log(semanaTres);
        semanaCuatro = semanaCuatro.reduce(getSum);
        console.log(semanaCuatro);

        losPromedios.push(semanaUno, semanaDos, semanaTres, semanaCuatro);
        console.log(losPromedios);
    })
    </script>
    <script>
    var ramos;
    var losCursos = [];
    let circulo;

    function preload() {
        let losDatos = 'https://api.myjson.com/bins/qaz4x'
        ramos = loadJSON(losDatos);
    }
    // var losPromedios = [Array(4) 0: 3.5 1: 5.75 2: 5.1666666666666673: 5.833333333333333length: 4]; si pongo los promedios aquí, sí se dibuja, sino no
    function setup() {
        createCanvas(windowWidth-200, 350).parent("resultado").style("padding-left: 10%");
        background(255);
        noStroke();
        textAlign(CENTER);
        rectMode(CENTER);

        for (var m = 0; m < losPromedios.length; m++) {
            translate(0, 0);
            fill(200, 0, 0);
            rect(150, 100 + (m * 45), losPromedios[m] * (windowWidth/50), windowHeight/18);
            fill(0, 255, 255);
            //text('Semana ' + (m + 1), losPromedios[m]+ 100, 30);

        }
        
        //console.log(ramos);

        /*for (var z = 0; z < ramos.length; z++){
            losCursos = losCursos.push(ramos[z].nombre);
        }*/

    }
    </script>
</body>

</html>